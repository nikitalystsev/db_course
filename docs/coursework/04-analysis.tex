\chapter{Аналитический раздел}

В данном разделе будет проведен анализ предметной области, будет проведено сравнение существующих решений. 
Также будет проведена формализация и описание информации, подлежащей хранению в проектируемой базе данных, будут выделены типы пользователей проектируемого приложения к базе данных, а также будет выбрана модель базы данных.

\section{Анализ предметной области}

В данном подразделе будет формально описан список продуктов первой необходимости, Poccтат --- орган, отвечающий за сбор статистики и участвующий в формировании цен на продукты, а также описан <<Меркурий>> --- автоматизированная система для отслеживания продуктов питания на всей цепи их производства.

\subsection{Элементы продуктовой корзины первой необходимости}

\textbf{Товары первой необходимости} --- товары, потребление которых при изменении дохода существеннно не меняется \cite{info_essential_goods}.

К продовольственным товарам первой необходимости относят 24 товара \cite{info_essential_goods2}:

\begin{itemize}[label=--]
	\item говядина (кроме бескостного мяса);
	\item cвинина (кроме бескостного мяса);
	\item баранина (кроме бескостного мяса);
	\item куры (кроме куриных окорочков);
	\item рыба мороженая неразделанная;
	\item масло сливочное;
	\item масло подсолнечное;
	\item молоко питьевое;
	\item яйца куриные;
	\item сахар-песок;
	\item соль поваренная пищевая;
	\item чай черный байховый;
	\item мука пшеничная;
	\item хлеб ржаной, ржано-пшеничный;
	\item хлеб и булочные изделия из пшеничной муки;
	\item рис шлифованный;
	\item пшено;
	\item крупа гречневая - ядрица;
	\item вермишель;
	\item картофель;
	\item капуста белокочанная свежая;
	\item лук репчатый;
	\item морковь;
	\item яблоки.
\end{itemize}

\clearpage

\subsection{Акции на товары}

На данный момент рынок розничной торговли очень насыщен. 
С каждым днем среди производителей конкуренция растет высокими темпами. 
Одной рекламы порой бывает не достаточно, чтобы привлечь внимание к производителю и его продукции. 
Чтобы хоть как то выделиться среди многочисленных фирм и предприятий, компаниям необходимо прибегать к методам стимулирования сбыта продукции \cite{info_stock}.

Одна из форм стимулирования --- \textbf{ценовая} \cite{info_stock}. 
Ее суть заключается в установлении скидки на определенный товар или группу товаров.
Можно выделить 5 основных типов акций со снижением  цены \cite{info_promotion1, info_promotion2}:

\begin{itemize}[label*=--]
	\item скидка <<товар дня>>;
	\item скидка за объем, в том числе по принципу <<1+1=3>>;
	\item cкидка отдельным категориям покупателей;
	\item скидка, приуроченная к определенному событию;
	\item сезонная распродажа.
\end{itemize}

\subsection{Росстат}

\textbf{Росстат} ---  федеральный орган исполнительной власти, осуществляющий функции по формированию официальной статистической информации о социальных, экономических, демографических, экологических и других общественных процессах в Российской Федерации. \cite{info_rosstat}.

Одним из направлений сбора статистики являются \texttt{цены, инфляция}. 
Организации и их филиалы, индивидуальные предприниматели предоставляют в Росстат статистические отчеты, на основе которых производится расчет цен на различного рода товары и услуги.

\clearpage

\subsection{ФГИС <<Меркурий>>}

\textbf{ФГИС <<Меркурий>>} --- автоматизированная система, предназначенная для отслеживания продуктов питания на всей цепи производства и перемещения до точки реализации \cite{info_mercury}.

Работа с <<Меркурием>> заключается в создании и <<гашении>> \textbf{ветеринарно-сопроводительных документов (ВСД)} на всех этапах движения товара: от производства и переработки до продажи или утилизации.

Создание ФГИС <<Меркурий>> позволило достичь следующих целей \cite{info_mercury, info_mercury2}:

\begin{itemize}[label=--]
	\item защита потребителя от некачественной и небезопасной продукции, а все население страны от экономических и социальных угроз;
	\item обеспечение прозрачности и эффективности действий надзорных органов в борьбе с мошенничеством;
	\item минимизация бюрократии и предоставление удобного прозрачного механизма для комфортной работы частного бизнеса.
\end{itemize}

Помимо ВСД существует еще 3 типа разрешительных документов на пищевую продукцию \cite{info_certificates}: 

\begin{itemize}[label*=--]
	\item декларация о соответствии на пищевую продукцию (ДС);
	\item добровольный сертификат на пищевую продукцию;
	\item свидетельство о государственной регистрации пищевой продукции (СГР на пищевую продукцию).
\end{itemize}

\clearpage

\section{Существующие решения}

На рынке существует большое количество сервисов для мониторинга цен на продукты в различных магазинах. Наиболее популярными являются:

\begin{itemize}[label=--]
	\item <<Едадил>> \cite{info_edadil};
	\item SkidkaOnline \cite{info_skidka_online};
	\item Price.ru \cite{info_price_ru}.
\end{itemize}

Сравнение существующих решений было произведено в таблице \ref{tbl:exist_sol}:

\begin{table}[ht]
	\begin{center}
		\begin{threeparttable}
			\caption{Сравнение существующих решений}
			\label{tbl:exist_sol}
			\begin{tabular}{|p{7cm}|c|c|c|}
				\hline
				\textbf{Критерии} & <<Едадил>> & SkidkaOnline & Price.ru \\
				\hline
				возможность сравнения цены на конкретный товар в разных магазинах & + & - & + \\
				\hline
				возможность оставить отзыв о товаре & + & + & + \\
				\hline
				покрытие магазинов & Высокое & Высокое & Низкое \\
				\hline
				наличие информации об акциях на товары & + & + & + \\
				\hline
				возможность просмотра динамики изменения цены & - & - & + \\
				\hline
			\end{tabular}
		\end{threeparttable}			
	\end{center}
\end{table}

\clearpage

\section{Формализация и описание информации, подлежащей хранению в проектируемой базе данных}

Разрабатываемая база данных должна позволять хранить всю необходимую информацию для проведения сравнительного анализа цен на элементы продуктовой корзины первой необходимости. 

На основе анализа предметной области, в разрабатываемой базе данных были выделены сущности, приведенные в таблице \ref{tbl:db_entities}: 

\begin{table}[ht]
	\begin{center}
		\begin{threeparttable}
			\caption{Выделенные сущности предметной области и их описание}
			\label{tbl:db_entities}
			\begin{tabular}{|p{4.5cm}|p{10cm}|}
				\hline
				\textbf{Категория} & \textbf{Сведения} \\ \hline
				Магазин & Название, телефон, адрес, ФИО директора \\ 
				\hline
				Товар & Название, категория, бренд, состав, вес, масса нетто, тип упаковки \\ 
				\hline
				Сертификат соответствия & Тип сертификата, номер сертификата, нормативный документ, дата регистрации сертификата, дата окончания действия сертификата, статус соответствия \\ 
				\hline
				Цена & Цена, единица измерения, дата установки  \\ 
				\hline
				Акция & Тип акции, дата начала, дата конца, размер бонуса, описание \\ 
				\hline
				Оценка товара & Отзыв, рейтинг \\ 
				\hline
				Производитель & Название, адрес, страна, контактная информация \\ 
				\hline
				Дистрибьютор & Название, адрес, контактная информация \\ 
				\hline
				Ритейлер & Название, адрес, контактная информация \\ 
				\hline
			\end{tabular}
		\end{threeparttable}
	\end{center}
\end{table}

\clearpage

На рисунке \ref{img:er-diag.drawio} представлена ER-диаграмма сущностей проектируемой базы данных в нотации Чена:

\includesvgimage
{er-diag.drawio} % Имя файла без расширения (файл должен быть расположен в директории inc/img/)
{f} % Обтекание (без обтекания)
{h} % Положение рисунка (см. figure из пакета float)
{1\textwidth} % Ширина рисунка
{ER-диаграмма сущностей проектируемой базы данных в нотации Чена} % Подпись рисунка

\clearpage

\section{Формализация и описание пользователей проектируемого приложения к базе данных}

Разрабатываемое приложение должно предоставлять интерфейс для взаимодействия с базой данных. 

В соответствии выделенными в разрабатываемой базе данных сущностями выделяется 2 типа пользователей:

\begin{table}[ht]
	\begin{center}
		\begin{threeparttable}
			\caption{Типы пользователей и их описание}
			\label{tbl:db_roles}
			\begin{tabular}{|p{4.5cm}|p{10cm}|}
					\hline
					\textbf{Тип пользователя} & \textbf{Описание} \\ \hline
					Пользователь & Может просматривать всю информацию о товарах, сравнивать цены, а также ставить оценки на товары. \\
					\hline
					Администратор & Управляет всей системой. Может добавлять~/удалять магазины, сертификаты на товары. \\ 
					\hline
				\end{tabular}
		\end{threeparttable}
	\end{center}
\end{table}

Разрабатываемая система также расширяет возможности пользователей, позволяя им добавлять новые товары, вносить изменения в цену товара, а также добавлять новые магазины.

На рисунке \ref{img:use-case-diag.drawio} представлены диаграммы вариантов использования для различных пользователей системы:

\clearpage

\includesvgimage
{use-case-diag.drawio} % Имя файла без расширения (файл должен быть расположен в директории inc/img/)
{f} % Обтекание (без обтекания)
{h} % Положение рисунка (см. figure из пакета float)
{0.8\textwidth} % Ширина рисунка
{Диаграмма вариантов использования для различных пользователей системы} % Подпись рисунка

\clearpage

\section{Классификация и выбор СУБД по модели данных}

СУБД --- приложение, обеспечивающее создание, хранение, обновление и поиск информации в базах данных.

Модель данных --- это абстрактное и логическое определение объектов и его поведение, в совокупности составляющих доступ к данным, с которой взаимодействует пользователь~\cite{info_intro_db_williams}. С помощью модели данных могут быть представлены объекты предметной области и взаимосвязи между ними.

По модели данных СУБД разделяются на:

\begin{enumerate}[label={\arabic*)}]
	\item дореляционные модели, которые, в свою очередь, делятся на:
	\begin{itemize}[label*=--]
		\item инвертированные списки;
		\item иерархические;
		\item сетевые.
	\end{itemize}
	\item реляционные модели данных;
	\item постреляционные модели данных.
\end{enumerate}

\subsection{Дореляционные базы данных}

Дореляционные БД подразделяются на инвертированные списки (файлы), иерархические БД и сетевые БД.

БД на основе инвертированных списков --- это набор файлов с записями. Каждый файл имеет свой порядок, определяемый физической организацией данных. Для каждого файла могут быть созданы дополнительные упорядочения на основе значений полей записей (инвертированные списки), обычно с помощью индексов. В такой модели отсутствуют ограничения целостности, но их определяют программы, работающие с БД. Одно из немногих возможных ограничений --- уникальный индекс.

Иерархическая модель БД состоит из объектов с указателями от родительских объектов к потомкам, соединяя вместе связанную информацию. Иерархические БД могут быть представлены как дерево. 

К основным понятиям сетевой модели БД относятся: элемент (узел), связь. Узел --- это совокупность атрибутов данных, описывающих некоторый объект. Сетевые БД могут быть представлены в виде графа. В сетевой БД логика процедуры выборки данных зависит от физической организации этих данных. Поэтому эта модель не является полностью независимой от приложения. Другими словами, если необходимо изменить структуру данных, то нужно изменить и приложение. 

Преимущество дореляционных БД состоит в том, что они позволяют управлять данными на низком уровне. Недостатком является необходимость знать физическую организацию данных и зависимость прикладных систем от это организации \cite{info_db_kuznecov}.

\subsection{Реляционные базы данных}

Реляционная модель включает 3 компонента: 

\begin{enumerate}[label={\arabic*)}]
	\item структурный --- данные в базе данных представляют собой набор отношений;
	\item целостный --- отношения (таблицы) отвечают определенным условиям целостности;
	\item манипуляционный --- манипулирования отношениями осуществляется средствами реляционной алгебры и/или реляционного исчисления.
\end{enumerate}

Основными достоинствами реляционных БД является наличие небольшого набора абстракций, наличие простого и в то же время мощного математического аппарата, возможность ненавигационного манипулирования данными без необходимости знания конкретной физической организации баз данных во внешней памяти \cite{info_db_kuznecov}.

\clearpage

\subsection{Постреляционные базы данных}

Постреляционная модель данных в общем случае представляет собой расширенную реляционную модель, снимающую ограничение неделимости значений полей. То есть, допускаются многозначные поля, значения которых состоят из подзначений. Набор значений многозначных полей считается самостоятельной таблицей, встроенной в основную \cite{info_db_sopchenko}.

Достоинство постреляционной модели данных: возможность представления связанных реляционных таблиц одной постреляционной таблицей.  Недостаток постреляционной модели: сложность в обеспечении целостности данных \cite{info_db_sopchenko}.
                         
\section*{Вывод} 

В данном разделе была проанализирована предметная область, рассмотрены существующие решения. На основе анализа предметной области была формализована задача и данные, описаны типы пользователей. Для решения задачи была выбрана реляционная модель, так как для разрабатываемой базы данных важна простота хранения структурированных данных, целостность хранимых данных.